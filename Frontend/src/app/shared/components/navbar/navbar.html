<mat-toolbar class="navbar">
  <div class="navbar-container">
    <div class="navbar-brand">
      <a routerLink="/feed" class="brand-link">
        <mat-icon class="brand-icon">article</mat-icon>
        <span class="brand-text">01Blog</span>
      </a>
    </div>

    <nav class="nav-links">
      <a
        class="feed-link"
        mat-button
        routerLink="/feed"
        routerLinkActive="active"
        [routerLinkActiveOptions]="{exact: false}"
      >
        <mat-icon>home</mat-icon>
        <span>Feed</span>
      </a>

      <a mat-button routerLink="/discover" routerLinkActive="active">
        <mat-icon>explore</mat-icon>
        <span>Discover</span>
      </a>

      <a class="myprofile-link" mat-button routerLink="/my-profile" routerLinkActive="active">
        <mat-icon>account_circle</mat-icon>
        <span>My Profile</span>
      </a>

      @if (isAdmin()) {
      <a mat-button routerLink="/admin" routerLinkActive="active" class="nav-link admin-link">
        <mat-icon>shield</mat-icon>
        <span>Admin Panel</span>
      </a>
      }
    </nav>

    <!-- Right Section -->
    <div class="navbar-actions">
      <!-- Notification Bell -->
      <div class="notification-wrapper">
        <button
          mat-icon-button
          class="notification-btn"
          (click)="toggleNotificationDropdown()"
          [matBadge]="unreadCount()"
          [matBadgeHidden]="unreadCount() === 0"
          matBadgeColor="warn"
          matBadgeSize="small"
          aria-label="Notifications"
        >
          <mat-icon>notifications</mat-icon>
        </button>

        <!-- Notification Dropdown -->
        @if (showNotificationDropdown()) {
        <div class="notification-dropdown-container">
          <app-notification-dropdown
            (notificationClicked)="handleNotificationClick()"
            (countUpdated)="handleNotificationCountUpdate($event)"
          ></app-notification-dropdown>
        </div>
        }
      </div>

      <!-- User Menu -->
      <button mat-button [matMenuTriggerFor]="menu" class="user-menu-btn">
        <mat-icon>account_circle</mat-icon>
        <span class="username">{{ username }}</span>
        <mat-icon class="dropdown-icon">arrow_drop_down</mat-icon>
      </button>

      <mat-menu #menu="matMenu">
        <button mat-menu-item routerLink="/my-profile">
          <mat-icon>account_circle</mat-icon>
          <span>My Profile</span>
        </button>

        @if (isAdmin()) {
        <button mat-menu-item (click)="goToAdminPanel()">
          <mat-icon>shield</mat-icon>
          <span>Admin Panel</span>
        </button>
        }

        <mat-divider></mat-divider>

        <button mat-menu-item (click)="onLogout()">
          <mat-icon>logout</mat-icon>
          <span>Logout</span>
        </button>
      </mat-menu>
    </div>
  </div>
</mat-toolbar>
