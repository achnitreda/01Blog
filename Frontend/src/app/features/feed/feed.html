<div class="feed-container">
  <!-- Header -->
  <div class="feed-header">
    <div class="header-text">
      <h1>Your Feed</h1>
      <p>Posts from people you follow</p>
    </div>
  </div>

  <!-- Loading State -->
  @if (isLoading()) {
  <div class="loading-state">
    <mat-icon class="loading-icon">refresh</mat-icon>
    <p>Loading your feed...</p>
  </div>
  }

  <!-- Error State -->
  @if (errorMessage() && !isLoading()) {
  <div class="error-state">
    <mat-icon>error_outline</mat-icon>
    <h3>Failed to Load Feed</h3>
    <p>{{ errorMessage() }}</p>
    <button mat-raised-button class="retry-btn" (click)="loadFeed()">
      <mat-icon>refresh</mat-icon>
      <span>Try Again</span>
    </button>
  </div>
  }

  <!-- Empty State (Not following anyone) -->
  @if (isEmpty() && !errorMessage()) {
  <div class="empty-state">
    <mat-icon class="empty-icon">group</mat-icon>
    <h3>Your feed is empty</h3>
    <p>Start following users to see their posts here!</p>

    <div class="empty-actions">
      <p class="suggestion">
        ðŸ’¡ <strong>Tip:</strong> Click on any username to visit their profile and follow them
      </p>

      <div class="action-buttons">
        <button mat-raised-button class="discover-btn" routerLink="/discover">
          <mat-icon>explore</mat-icon>
          <span>Discover Users</span>
        </button>

        <button mat-button class="profile-btn" (click)="goToMyProfile()">
          <mat-icon>account_circle</mat-icon>
          <span>My Profile</span>
        </button>
      </div>
    </div>
  </div>
  }

  <!-- Posts Feed -->
  @if (!isLoading() && !isEmpty() && !errorMessage()) {
  <div class="posts-feed">
    @for (post of posts(); track post.id) {
    <app-post-card
      [post]="post"
      (onLike)="handleLike($event)"
      (onEdit)="handleEdit($event)"
      (onDelete)="handleDelete($event)"
      (onCommentClick)="handleCommentClick($event)"
    ></app-post-card>
    }
  </div>
  }

  <!-- Floating Action Button -->
  <button mat-fab class="fab-button" (click)="openCreateDialog()" aria-label="Create new post">
    <mat-icon>add</mat-icon>
  </button>
</div>
